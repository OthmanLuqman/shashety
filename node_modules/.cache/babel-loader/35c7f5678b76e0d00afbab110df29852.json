{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n//import infoItem from \"@/services/infoItems\";\n//import { config } from \"@fortawesome/fontawesome-svg-core\";\nimport axios from \"axios\";\nexport var namespaced = true;\nexport var state = {\n  infoItems: []\n};\nexport var getters = {\n  getOfInfoItems: function getOfInfoItems(state) {\n    return state.infoItems.map(function (info) {\n      return {\n        id: info.id,\n        image: info.image,\n        like: info.like,\n        title: info.title,\n        cover: info.cover,\n        trailerUrl: info.trailerUrl\n      };\n    });\n  },\n  getOfInfoItemById: function getOfInfoItemById(state) {\n    return function (id) {\n      return state.infoItems.find(function (infoItem) {\n        return infoItem.id === id;\n      });\n    };\n  }\n};\nexport var mutations = {\n  TOGGLE: function TOGGLE(state, id) {\n    state.infoItems.forEach(function (infoItems) {\n      if (infoItems.id == id) infoItems.like = !infoItems.like;\n    });\n  },\n  SET_INFO_ITEMS: function SET_INFO_ITEMS(state, infoItems) {\n    state.infoItems = infoItems.map(function (info) {\n      return {\n        id: info.id,\n        image: \"http://192.168.0.199:1337\".concat(info.attributes.image.data.attributes.url),\n        like: info.attributes.like,\n        title: info.attributes.title,\n        cover: info.attributes.cover,\n        trailerUrl: info.attributes.trailerUrl\n      };\n    });\n  }\n};\nexport var actions = {\n  getAllInfoItem: function getAllInfoItem(_ref) {\n    var commit = _ref.commit,\n        dispatch = _ref.dispatch;\n    var token = localStorage.getItem(\"token\");\n    axios.get(\"http://192.168.0.199:1337/api\", {\n      withCredentials: false,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (responce) {\n      return responce.json();\n    }).then(function (data) {\n      console.log(data.data);\n      commit(\"SET_INFO_ITEMS\", data.data);\n      return data.data;\n    }).catch(function (err) {\n      var notification = {\n        type: \"error\",\n        message: \"It can not fetch any data from api: \" + err.message\n      };\n      dispatch(\"notification/add\", notification, {\n        root: true\n      });\n    });\n  },\n  toggle: function toggle(_ref2, id) {\n    var getters = _ref2.getters,\n        commit = _ref2.commit;\n    var token = localStorage.getItem(\"token\");\n    var likeState = getters.getOfInfoItemById(id);\n    console.log(\"id is correct \".concat(likeState.like));\n    fetch(\"http://192.168.0.199:1337/api/posts/\".concat(id), {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      },\n      body: JSON.stringify({\n        data: {\n          like: !likeState.like\n        }\n      })\n    });\n    commit(\"TOGGLE\", id);\n  },\n  getTokenAPI: function getTokenAPI() {// const { data } = axios.post(\"http://localhost:1337/api/auth/local\", {\n    //   identifier: \"othman.l.hazim@gmail.com\",\n    //   password: \"q@ed4D?#kRemsY$\",\n    // });\n    //console.log(data);\n  }\n};","map":{"version":3,"sources":["/Users/othmanluqman/Desktop/learn js/shashety-new/src/store/modules/infoItems.js"],"names":["axios","namespaced","state","infoItems","getters","getOfInfoItems","map","info","id","image","like","title","cover","trailerUrl","getOfInfoItemById","find","infoItem","mutations","TOGGLE","forEach","SET_INFO_ITEMS","attributes","data","url","actions","getAllInfoItem","commit","dispatch","token","localStorage","getItem","get","withCredentials","headers","Authorization","then","responce","json","console","log","catch","err","notification","type","message","root","toggle","likeState","fetch","method","body","JSON","stringify","getTokenAPI"],"mappings":"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","sourcesContent":["//import infoItem from \"@/services/infoItems\";\n//import { config } from \"@fortawesome/fontawesome-svg-core\";\nimport axios from \"axios\";\nexport const namespaced = true;\nexport const state = {\n  infoItems: [],\n};\nexport const getters = {\n  getOfInfoItems: (state) => {\n    return state.infoItems.map((info) => {\n      return {\n        id: info.id,\n        image: info.image,\n        like: info.like,\n        title: info.title,\n        cover: info.cover,\n        trailerUrl: info.trailerUrl,\n      };\n    });\n  },\n  getOfInfoItemById: (state) => (id) => {\n    return state.infoItems.find((infoItem) => infoItem.id === id);\n  },\n};\nexport const mutations = {\n  TOGGLE: (state, id) => {\n    state.infoItems.forEach((infoItems) => {\n      if (infoItems.id == id) infoItems.like = !infoItems.like;\n    });\n  },\n  SET_INFO_ITEMS(state, infoItems) {\n    state.infoItems = infoItems.map((info) => {\n      return {\n        id: info.id,\n        image: `http://192.168.0.199:1337${info.attributes.image.data.attributes.url}`,\n        like: info.attributes.like,\n        title: info.attributes.title,\n        cover: info.attributes.cover,\n        trailerUrl: info.attributes.trailerUrl,\n      };\n    });\n  },\n};\nexport const actions = {\n  getAllInfoItem: ({ commit, dispatch }) => {\n    const token = localStorage.getItem(\"token\");\n    axios\n      .get(\"http://192.168.0.199:1337/api\",{\n        withCredentials: false,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((responce) => responce.json())\n      .then((data) => {\n        console.log(data.data);\n        commit(\"SET_INFO_ITEMS\", data.data);\n        return data.data;\n      })\n      .catch((err) => {\n        const notification = {\n          type: \"error\",\n          message: \"It can not fetch any data from api: \" + err.message,\n        };\n        dispatch(\"notification/add\", notification, { root: true });\n      });\n  },\n  toggle: ({ getters, commit }, id) => {\n    const token = localStorage.getItem(\"token\");\n    let likeState = getters.getOfInfoItemById(id);\n    console.log(`id is correct ${likeState.like}`);\n    fetch(`http://192.168.0.199:1337/api/posts/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ data: { like: !likeState.like } }),\n    });\n    commit(\"TOGGLE\", id);\n  },\n  getTokenAPI: () => {\n    // const { data } = axios.post(\"http://localhost:1337/api/auth/local\", {\n    //   identifier: \"othman.l.hazim@gmail.com\",\n    //   password: \"q@ed4D?#kRemsY$\",\n    // });\n    //console.log(data);\n  },\n};\n"]},"metadata":{},"sourceType":"module"}