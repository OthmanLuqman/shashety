{"ast":null,"code":"import _asyncToGenerator from \"/Users/othmanluqman/Desktop/learn js/shashety-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import axios from \"axios\";\nexport default {\n  name: \"Login-page\",\n  data: function data() {\n    return {\n      username: \"\",\n      pwd: \"\",\n      activeToMany: false,\n      errors: []\n    };\n  },\n  beforeCreate: function beforeCreate() {\n    if (localStorage.getItem(\"token\") != null) {\n      this.$router.push(\"/\");\n    }\n  },\n  methods: {\n    Submit: function Submit() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.errors = [];\n\n                if (!_this.username) {\n                  _this.errors.push(\"User Name is Required\");\n                }\n\n                if (!_this.pwd) {\n                  _this.errors.push(\"User Password is Required\");\n                }\n\n                if (_this.username && _this.pwd) {\n                  _this.errors = [];\n\n                  _this.$store.dispatch(\"users/signIn\", {\n                    identifier: _this.username,\n                    password: _this.pwd\n                  }).then(function () {\n                    _this.$router.push(\"/\");\n                  }).catch(function (e) {\n                    localStorage.removeItem(\"token\");\n                    console.log(e.m);\n                  }); // await fetch(\"http://localhost:1337/api/auth/local\", {\n                  //   method: \"POST\",\n                  //   headers: {\n                  //     \"Content-Type\": \"application/json\",\n                  //   },\n                  //   body: JSON.stringify({\n                  //     identifier: this.username,\n                  //     password: this.pwd,\n                  //   }),\n                  // })\n                  //   .then((response) => {\n                  //     console.log(response);\n                  //     if (response.status == 429) {\n                  //       this.activeToMany = true;\n                  //       this.errors.push(\"Many Requests, wait for a One Minute\");\n                  //       setTimeout(() => {\n                  //         this.activeToMany = false;\n                  //         this.errors = [];\n                  //       }, 60000);\n                  //     }\n                  //     if (response.ok) {\n                  //       this.errors = [];\n                  //       return response.json();\n                  //     } else {\n                  //       this.errors.push(\"Username & password are wrong\");\n                  //     }\n                  //   })\n                  //   .then((data) => {\n                  //     if (data) {\n                  //       axios.defaults.headers.common[\"Authorization\"] =\n                  //         \"Bearer \" + data.jwt;\n                  //       localStorage.setItem(\"token\", JSON.stringify(data.jwt));\n                  //       //this.$store.commit(\"jwt/SET_TOKEN\");\n                  //       this.$router.push(\"/\");\n                  //     }\n                  //   })\n                  //   .catch((error) => {\n                  //     localStorage.removeItem(\"token\");\n                  //     console.log(\"error\", error);\n                  //   });\n\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;EACAA,kBADA;EAEAC;IACA;MACAC,YADA;MAEAC,OAFA;MAGAC,mBAHA;MAIAC;IAJA;EAMA,CATA;EAUAC,YAVA,0BAUA;IACA;MACA;IACA;EACA,CAdA;EAeAC;IACAC,MADA,oBACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBACA;kBACA;gBACA;;gBACA;kBACA;gBACA;;gBACA;kBACA;;kBACA,aACAC,QADA,CACA,cADA,EACA;oBACAC,0BADA;oBAEAC;kBAFA,CADA,EAKAC,IALA,CAKA;oBACA;kBACA,CAPA,EAQAC,KARA,CAQA;oBACAC;oBACAC;kBACA,CAXA,EAFA,CAcA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;kBACA;;gBACA;;cA9DA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA+DA;EAhEA;AAfA","names":["name","data","username","pwd","activeToMany","errors","beforeCreate","methods","Submit","dispatch","identifier","password","then","catch","localStorage","console"],"sourceRoot":"src/views","sources":["LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"login-form\">\n      <img src=\"../assets/SHASHETY.png\" alt=\"\" />\n      <div class=\"error\" v-if=\"errors.length\">\n        <div v-for=\"error in errors\" :key=\"error\">\n          {{ error }}\n        </div>\n      </div>\n      <form>\n        <input type=\"text\" v-model=\"username\" id=\"username\" />\n        <input type=\"password\" v-model=\"pwd\" id=\"pwd\" />\n        <button type=\"submit\" @click.prevent=\"Submit\" :disabled=\"activeToMany\">\n          submit\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\n// import axios from \"axios\";\nexport default {\n  name: \"Login-page\",\n  data: () => {\n    return {\n      username: \"\",\n      pwd: \"\",\n      activeToMany: false,\n      errors: [],\n    };\n  },\n  beforeCreate() {\n    if (localStorage.getItem(\"token\") != null) {\n      this.$router.push(\"/\");\n    }\n  },\n  methods: {\n    async Submit() {\n      this.errors = [];\n      if (!this.username) {\n        this.errors.push(\"User Name is Required\");\n      }\n      if (!this.pwd) {\n        this.errors.push(\"User Password is Required\");\n      }\n      if (this.username && this.pwd) {\n        this.errors = [];\n        this.$store\n          .dispatch(\"users/signIn\", {\n            identifier: this.username,\n            password: this.pwd,\n          })\n          .then(() => {\n            this.$router.push(\"/\");\n          })\n          .catch((e) => {\n            localStorage.removeItem(\"token\");\n            console.log(e.m);\n          });\n        // await fetch(\"http://localhost:1337/api/auth/local\", {\n        //   method: \"POST\",\n        //   headers: {\n        //     \"Content-Type\": \"application/json\",\n        //   },\n        //   body: JSON.stringify({\n        //     identifier: this.username,\n        //     password: this.pwd,\n        //   }),\n        // })\n        //   .then((response) => {\n        //     console.log(response);\n        //     if (response.status == 429) {\n        //       this.activeToMany = true;\n        //       this.errors.push(\"Many Requests, wait for a One Minute\");\n        //       setTimeout(() => {\n        //         this.activeToMany = false;\n        //         this.errors = [];\n        //       }, 60000);\n        //     }\n        //     if (response.ok) {\n        //       this.errors = [];\n        //       return response.json();\n        //     } else {\n        //       this.errors.push(\"Username & password are wrong\");\n        //     }\n        //   })\n        //   .then((data) => {\n        //     if (data) {\n        //       axios.defaults.headers.common[\"Authorization\"] =\n        //         \"Bearer \" + data.jwt;\n        //       localStorage.setItem(\"token\", JSON.stringify(data.jwt));\n        //       //this.$store.commit(\"jwt/SET_TOKEN\");\n        //       this.$router.push(\"/\");\n        //     }\n        //   })\n        //   .catch((error) => {\n        //     localStorage.removeItem(\"token\");\n        //     console.log(\"error\", error);\n        //   });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.login {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 95vh;\n  .login-form {\n    width: 500px;\n    // display: flex;\n    // flex-direction: column;\n    img {\n      padding-bottom: 40px;\n    }\n    form {\n      display: flex;\n      flex-direction: column;\n      input {\n        margin: 10px 0;\n        padding: 10px;\n        border: none;\n        border-radius: 8px;\n        outline-color: $red;\n      }\n      button {\n        margin: 10px 0;\n        padding: 10px;\n        border: none;\n        border-radius: 8px;\n        color: white;\n        background: $red;\n        transition: all 0.3s linear;\n        cursor: pointer;\n        &:hover {\n          transform: scale(1.1);\n        }\n      }\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}