{"ast":null,"code":"import _asyncToGenerator from \"/Users/othmanluqman/Desktop/learn js/shashety-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"Login-page\",\n  data: function data() {\n    return {\n      username: \"\",\n      pwd: \"\",\n      errors: []\n    };\n  },\n  b: function b() {\n    // if (localStorage.getItem(\"token\")) {\n    //   this.$router.push({ name: \"/\" });\n    // }\n    if (localStorage.getItem(\"token\") != null) {\n      this.$router.push(\"/\");\n    }\n\n    this.$router.push(\"/Login\");\n  },\n  computed: {// checkUser: () => {\n    //   localStorage.getItem(\"token\") ? this.$router.push(\"/\") : null;\n    //   if (localStorage.getItem(\"token\") != null) {\n    //     console.log(\"true\");\n    //   }\n    // },\n  },\n  methods: {\n    Submit: function Submit() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(_this.username && _this.pwd)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                _context.next = 3;\n                return fetch(\"http://localhost:1337/api/auth/local\", {\n                  method: \"POST\",\n                  headers: {\n                    \"Content-Type\": \"application/json\"\n                  },\n                  body: JSON.stringify({\n                    identifier: _this.username,\n                    password: _this.pwd\n                  })\n                }).then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  if (data.jwt != null) {\n                    localStorage.setItem(\"token\", data.jwt); //this.$router.push(\"/\");\n                  }\n                }).catch(function (error) {\n                  localStorage.removeItem(\"token\");\n                  console.log(\"error\", error);\n                });\n\n              case 3:\n                _this.errors = [];\n\n                if (!_this.username) {\n                  _this.errors.push(\"User Name is Required\");\n                }\n\n                if (!_this.pwd) {\n                  _this.errors.push(\"User Password is Required\");\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;AAmBA;AACAA,oBADA;AAEAC;AACA;AACAC,kBADA;AAEAC,aAFA;AAGAC;AAHA;AAKA,GARA;AASAC,GATA,eASA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,GAjBA;AAkBAC,aACA;AACA;AACA;AACA;AACA;AACA;AANA,GAlBA;AA0BAC;AACAC,UADA,oBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,2BADA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAEAC;AACAC,gCADA;AAEAC;AACA;AADA,mBAFA;AAKAC;AACAC,8CADA;AAEAC;AAFA;AALA,mBAUAC,IAVA,CAUA;AAAA;AAAA,iBAVA,EAWAA,IAXA,CAWA;AACA;AACAC,4DADA,CAEA;AACA;AACA,iBAhBA,EAiBAC,KAjBA,CAiBA;AACAD;AACAE;AACA,iBApBA,CAFA;;AAAA;AAwBA;;AACA;AACA;AACA;;AACA;AACA;AACA;;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+BA;AAhCA;AA1BA","names":["name","data","username","pwd","errors","b","computed","methods","Submit","fetch","method","headers","body","identifier","password","then","localStorage","catch","console"],"sourceRoot":"src/views","sources":["LoginPage.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"login-form\">\n      <img src=\"../assets/SHASHETY.png\" alt=\"\" />\n      <div class=\"error\" v-if=\"errors.length\">\n        <div v-for=\"error in errors\" :key=\"error\">\n          {{ error }}\n        </div>\n      </div>\n      <form>\n        <input type=\"text\" v-model=\"username\" id=\"username\" />\n        <input type=\"password\" v-model=\"pwd\" id=\"pwd\" />\n        <button type=\"submit\" @click.prevent=\"Submit\">submit</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Login-page\",\n  data: () => {\n    return {\n      username: \"\",\n      pwd: \"\",\n      errors: [],\n    };\n  },\n  b() {\n    // if (localStorage.getItem(\"token\")) {\n    //   this.$router.push({ name: \"/\" });\n    // }\n    if (localStorage.getItem(\"token\") != null) {\n      this.$router.push(\"/\");\n    }\n    this.$router.push(\"/Login\");\n  },\n  computed: {\n    // checkUser: () => {\n    //   localStorage.getItem(\"token\") ? this.$router.push(\"/\") : null;\n    //   if (localStorage.getItem(\"token\") != null) {\n    //     console.log(\"true\");\n    //   }\n    // },\n  },\n  methods: {\n    async Submit() {\n      if (this.username && this.pwd) {\n        await fetch(\"http://localhost:1337/api/auth/local\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            identifier: this.username,\n            password: this.pwd,\n          }),\n        })\n          .then((response) => response.json())\n          .then((data) => {\n            if (data.jwt != null) {\n              localStorage.setItem(\"token\", data.jwt);\n              //this.$router.push(\"/\");\n            }\n          })\n          .catch((error) => {\n            localStorage.removeItem(\"token\");\n            console.log(\"error\", error);\n          });\n      }\n      this.errors = [];\n      if (!this.username) {\n        this.errors.push(\"User Name is Required\");\n      }\n      if (!this.pwd) {\n        this.errors.push(\"User Password is Required\");\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.login {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 95vh;\n  .login-form {\n    width: 500px;\n    // display: flex;\n    // flex-direction: column;\n    img {\n      padding-bottom: 40px;\n    }\n    form {\n      display: flex;\n      flex-direction: column;\n      input {\n        margin: 10px 0;\n        padding: 10px;\n        border: none;\n        border-radius: 8px;\n        outline-color: $red;\n      }\n      button {\n        margin: 10px 0;\n        padding: 10px;\n        border: none;\n        border-radius: 8px;\n        color: white;\n        background: $red;\n        transition: all 0.3s linear;\n        cursor: pointer;\n        &:hover {\n          transform: scale(1.1);\n        }\n      }\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}