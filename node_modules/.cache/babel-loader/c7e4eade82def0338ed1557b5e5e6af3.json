{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nexport default {\n  state: {\n    infoItems: []\n  },\n  getters: {\n    getOfInfoItems: function getOfInfoItems(state) {\n      return state.infoItems.map(function (info) {\n        return {\n          id: info.id,\n          image: info.image,\n          like: info.like,\n          title: info.title,\n          cover: info.cover,\n          trailerUrl: info.trailerUrl\n        };\n      });\n    },\n    getOfInfoItemById: function getOfInfoItemById(state) {\n      return function (id) {\n        return state.infoItems.find(function (infoItem) {\n          return infoItem.id === id;\n        });\n      };\n    }\n  },\n  mutations: {\n    TOGGLE: function TOGGLE(state, id) {\n      state.infoItems.forEach(function (infoItems) {\n        if (infoItems.id == id) infoItems.like = !infoItems.like;\n      });\n    },\n    SET_INFO_ITEMS: function SET_INFO_ITEMS(state, infoItems) {\n      state.infoItems = infoItems.map(function (info) {\n        return {\n          id: info.id,\n          image: \"http://192.168:1337\".concat(info.attributes.image.data.attributes.url),\n          like: info.attributes.like,\n          title: info.attributes.title,\n          cover: info.attributes.cover,\n          trailerUrl: info.attributes.trailerUrl\n        };\n      });\n    }\n  },\n  actions: {\n    getAllInfoItem: function getAllInfoItem(_ref) {\n      var commit = _ref.commit;\n      var token = localStorage.getItem(\"token\");\n      fetch(\"http://localhost:1337/api/posts?populate=image\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \".concat(token)\n        }\n      }).then(function (responce) {\n        return responce.json();\n      }).then(function (data) {\n        console.log(data.data);\n        commit(\"SET_INFO_ITEMS\", data.data);\n      });\n    },\n    toggle: function toggle(_ref2, id) {\n      var getters = _ref2.getters,\n          commit = _ref2.commit;\n      var token = localStorage.getItem(\"token\");\n      var likeState = getters.getOfInfoItemById(id);\n      console.log(\"id is correct \".concat(likeState.like));\n      fetch(\"http://localhost:1337/api/posts/\".concat(id), {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \".concat(token)\n        },\n        body: JSON.stringify({\n          data: {\n            like: !likeState.like\n          }\n        })\n      });\n      commit(\"TOGGLE\", id);\n    },\n    getTokenAPI: function getTokenAPI() {// const { data } = axios.post(\"http://localhost:1337/api/auth/local\", {\n      //   identifier: \"othman.l.hazim@gmail.com\",\n      //   password: \"q@ed4D?#kRemsY$\",\n      // });\n      //console.log(data);\n    }\n  }\n};","map":{"version":3,"names":["state","infoItems","getters","getOfInfoItems","map","info","id","image","like","title","cover","trailerUrl","getOfInfoItemById","find","infoItem","mutations","TOGGLE","forEach","SET_INFO_ITEMS","attributes","data","url","actions","getAllInfoItem","commit","token","localStorage","getItem","fetch","method","headers","Authorization","then","responce","json","console","log","toggle","likeState","body","JSON","stringify","getTokenAPI"],"sources":["/Users/othmanluqman/Desktop/learn js/shashety-new/src/store/models/infoItems.js"],"sourcesContent":["export default {\n  state: {\n    infoItems: [],\n  },\n  getters: {\n    getOfInfoItems: (state) => {\n      return state.infoItems.map((info) => {\n        return {\n          id: info.id,\n          image: info.image,\n          like: info.like,\n          title: info.title,\n          cover: info.cover,\n          trailerUrl: info.trailerUrl,\n        };\n      });\n    },\n    getOfInfoItemById: (state) => (id) => {\n      return state.infoItems.find((infoItem) => infoItem.id === id);\n    },\n  },\n  mutations: {\n    TOGGLE: (state, id) => {\n      state.infoItems.forEach((infoItems) => {\n        if (infoItems.id == id) infoItems.like = !infoItems.like;\n      });\n    },\n    SET_INFO_ITEMS(state, infoItems) {\n      state.infoItems = infoItems.map((info) => {\n        return {\n          id: info.id,\n          image: `http://192.168:1337${info.attributes.image.data.attributes.url}`,\n          like: info.attributes.like,\n          title: info.attributes.title,\n          cover: info.attributes.cover,\n          trailerUrl: info.attributes.trailerUrl,\n        };\n      });\n    },\n  },\n  actions: {\n    getAllInfoItem: ({ commit }) => {\n      const token = localStorage.getItem(\"token\");\n      fetch(\"http://localhost:1337/api/posts?populate=image\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      })\n        .then((responce) => responce.json())\n        .then((data) => {\n          console.log(data.data);\n          commit(\"SET_INFO_ITEMS\", data.data);\n        });\n    },\n    toggle: ({ getters, commit }, id) => {\n      const token = localStorage.getItem(\"token\");\n      let likeState = getters.getOfInfoItemById(id);\n      console.log(`id is correct ${likeState.like}`);\n      fetch(`http://localhost:1337/api/posts/${id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ data: { like: !likeState.like } }),\n      });\n      commit(\"TOGGLE\", id);\n    },\n    getTokenAPI: () => {\n      // const { data } = axios.post(\"http://localhost:1337/api/auth/local\", {\n      //   identifier: \"othman.l.hazim@gmail.com\",\n      //   password: \"q@ed4D?#kRemsY$\",\n      // });\n      //console.log(data);\n    },\n  },\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}